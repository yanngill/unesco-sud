<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UNESCO ‚Äì Am√©rique latine & Cara√Øbes (hors Mexique)</title>

  <!-- Leaflet (sans integrity pour √©viter √©cran blanc) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

  <style>
    html, body { height:100%; margin:0; }
    #map { width:100%; height:100%; }

    .legend {
      padding: 8px 10px;
      background: white;
      border-radius: 6px;
      font-size: 12px;
      line-height: 1.4;
      box-shadow: 0 0 6px rgba(0,0,0,0.25);
    }
    .legend span {
      display:inline-block;
      width:12px;
      height:12px;
      margin-right:6px;
      border-radius:50%;
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    /* =========================
       1) INITIALISATION CARTE
       ========================= */
    const map = L.map("map").setView([0, -70], 3);

    /* =========================
       2) FONDS DE CARTE
       ========================= */

    // Carte classique AVEC noms (OpenStreetMap)
    const mapOSM = L.tileLayer(
      "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
      {
        maxZoom: 19,
        attribution: "&copy; OpenStreetMap"
      }
    ).addTo(map);

    // Satellite
    const satellite = L.tileLayer(
      "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
      {
        maxZoom: 19,
        attribution: "Tiles &copy; Esri"
      }
    );

    // Labels (noms des villes, pays, etc.)
    const labels = L.tileLayer(
      "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",
      {
        maxZoom: 19,
        attribution: "Labels &copy; Esri"
      }
    );

    // Satellite + noms
    const satelliteAvecNoms = L.layerGroup([satellite, labels]);

    // S√©lecteur de fonds
    L.control.layers(
      {
        "Carte (avec noms)": mapOSM,
        "Satellite (avec noms)": satelliteAvecNoms
      },
      null,
      { position: "topright" }
    ).addTo(map);

    /* =========================
       3) COULEURS PAR CAT√âGORIE
       ========================= */
    function getColor(type) {
      switch (type) {
        case "culturel": return "#1f77b4";
        case "naturel": return "#2ca02c";
        case "mixte": return "#9467bd";
        case "immat√©riel": return "#ff7f0e";
        default: return "#333";
      }
    }

    /* =========================
       4) SITES UNESCO (√Ä COMPL√âTER)
       =========================
       üëâ Tu ajoutes ici les sites,
       üëâ UN PAR UN, sans te battre.
    */
    const sites = [
      {
        nom: "Machu Picchu",
        pays: "P√©rou",
        lat: -13.1631,
        lng: -72.5450,
        type: "mixte",
        annee: 1983,
        description: "Cit√© inca embl√©matique perch√©e dans les Andes."
      },
      {
        nom: "√éles Gal√°pagos",
        pays: "√âquateur",
        lat: -0.75,
        lng: -90.30,
        type: "naturel",
        annee: 1978,
        description: "Archipel volcanique, laboratoire naturel de l‚Äô√©volution."
      },
      {
        nom: "Centre historique de La Havane",
        pays: "Cuba",
        lat: 23.1333,
        lng: -82.3833,
        type: "culturel",
        annee: 1982,
        description: "Ville coloniale espagnole majeure des Cara√Øbes."
      },
      {
        nom: "Tango",
        pays: "Argentine / Uruguay",
        lat: -34.6037,
        lng: -58.3816,
        type: "immat√©riel",
        annee: 2009,
        description: "Musique et danse embl√©matiques du R√≠o de la Plata."
      }
    ];

    /* =========================
       5) AFFICHAGE DES POINTS
       ========================= */
    sites.forEach(site => {
      const color = getColor(site.type);

      L.circleMarker([site.lat, site.lng], {
        radius: 7,
        color: color,
        weight: 2,
        fillColor: color,
        fillOpacity: 0.75
      })
      .bindPopup(`
        <strong>${site.nom}</strong><br/>
        <strong>Pays :</strong> ${site.pays}<br/>
        <strong>Type :</strong> ${site.type}<br/>
        <strong>UNESCO :</strong> ${site.annee}<br/><br/>
        ${site.description}
      `)
      .addTo(map);
    });

    /* =========================
       6) L√âGENDE
       ========================= */
    const legend = L.control({ position: "bottomright" });
    legend.onAdd = function () {
      const div = L.DomUtil.create("div", "legend");
      div.innerHTML += "<strong>Type de patrimoine</strong><br/>";
      div.innerHTML += `<span style="background:${getColor("culturel")}"></span>Culturel<br/>`;
      div.innerHTML += `<span style="background:${getColor("naturel")}"></span>Naturel<br/>`;
      div.innerHTML += `<span style="background:${getColor("mixte")}"></span>Mixte<br/>`;
      div.innerHTML += `<span style="background:${getColor("immat√©riel")}"></span>Immat√©riel<br/>`;
      return div;
    };
    legend.addTo(map);
  </script>
</body>
</html>
